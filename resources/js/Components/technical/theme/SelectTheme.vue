<template>
    <div class="checkbox" :class="{ active: isDark }" @click="changeActive()">
        <svg
            class="sun"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M8 12.25C10.3472 12.25 12.25 10.3472 12.25 8C12.25 5.65279 10.3472 3.75 8 3.75C5.65279 3.75 3.75 5.65279 3.75 8C3.75 10.3472 5.65279 12.25 8 12.25Z"
                fill="#818C99"
            />
            <path
                d="M8 2.75C8.13261 2.75 8.25979 2.69732 8.35355 2.60355C8.44732 2.50979 8.5 2.38261 8.5 2.25V1C8.5 0.867392 8.44732 0.740215 8.35355 0.646447C8.25979 0.552678 8.13261 0.5 8 0.5C7.86739 0.5 7.74021 0.552678 7.64645 0.646447C7.55268 0.740215 7.5 0.867392 7.5 1V2.25C7.5 2.38261 7.55268 2.50979 7.64645 2.60355C7.74021 2.69732 7.86739 2.75 8 2.75Z"
                fill="#818C99"
            />
            <path
                d="M3.58124 4.2875C3.67576 4.3795 3.80246 4.43099 3.93437 4.43099C4.06628 4.43099 4.19298 4.3795 4.2875 4.2875C4.381 4.19376 4.43351 4.06677 4.43351 3.93437C4.43351 3.80197 4.381 3.67498 4.2875 3.58124L3.40625 2.69374C3.36141 2.63912 3.30564 2.59449 3.24252 2.56272C3.1794 2.53095 3.11033 2.51274 3.03975 2.50928C2.96917 2.50581 2.89865 2.51716 2.83272 2.54259C2.76679 2.56802 2.70691 2.60698 2.65694 2.65694C2.60698 2.70691 2.56802 2.76679 2.54259 2.83272C2.51716 2.89865 2.50581 2.96917 2.50928 3.03975C2.51274 3.11033 2.53095 3.1794 2.56272 3.24252C2.59449 3.30564 2.63912 3.36141 2.69374 3.40625L3.58124 4.2875Z"
                fill="#818C99"
            />
            <path
                d="M2.75 8C2.75 7.86739 2.69732 7.74021 2.60355 7.64645C2.50979 7.55268 2.38261 7.5 2.25 7.5H1C0.867392 7.5 0.740215 7.55268 0.646447 7.64645C0.552678 7.74021 0.5 7.86739 0.5 8C0.5 8.13261 0.552678 8.25979 0.646447 8.35355C0.740215 8.44732 0.867392 8.5 1 8.5H2.25C2.38261 8.5 2.50979 8.44732 2.60355 8.35355C2.69732 8.25979 2.75 8.13261 2.75 8Z"
                fill="#818C99"
            />
            <path
                d="M3.58124 11.7125L2.69374 12.5937C2.59985 12.6885 2.54718 12.8166 2.54718 12.95C2.54718 13.0834 2.59985 13.2114 2.69374 13.3062C2.7904 13.3969 2.91747 13.4482 3.04999 13.45C3.18276 13.4494 3.31026 13.398 3.40624 13.3062L4.28749 12.4187C4.37367 12.3236 4.41998 12.199 4.41682 12.0707C4.41366 11.9424 4.36128 11.8202 4.27052 11.7295C4.17977 11.6387 4.05759 11.5863 3.92928 11.5832C3.80097 11.58 3.67636 11.6263 3.58124 11.7125Z"
                fill="#818C99"
            />
            <path
                d="M8 13.25C7.86739 13.25 7.74021 13.3027 7.64645 13.3964C7.55268 13.4902 7.5 13.6174 7.5 13.75V15C7.5 15.1326 7.55268 15.2598 7.64645 15.3536C7.74021 15.4473 7.86739 15.5 8 15.5C8.13261 15.5 8.25979 15.4473 8.35355 15.3536C8.44732 15.2598 8.5 15.1326 8.5 15V13.75C8.5 13.6174 8.44732 13.4902 8.35355 13.3964C8.25979 13.3027 8.13261 13.25 8 13.25Z"
                fill="#818C99"
            />
            <path
                d="M12.4187 11.7125C12.3236 11.6263 12.199 11.58 12.0707 11.5832C11.9424 11.5863 11.8202 11.6387 11.7295 11.7295C11.6387 11.8202 11.5863 11.9424 11.5832 12.0707C11.58 12.199 11.6263 12.3236 11.7125 12.4187L12.5937 13.3062C12.6897 13.398 12.8172 13.4494 12.95 13.45C13.0825 13.4482 13.2096 13.3969 13.3062 13.3062C13.4001 13.2114 13.4528 13.0834 13.4528 12.95C13.4528 12.8166 13.4001 12.6885 13.3062 12.5937L12.4187 11.7125Z"
                fill="#818C99"
            />
            <path
                d="M15 7.5H13.75C13.6174 7.5 13.4902 7.55268 13.3964 7.64645C13.3027 7.74021 13.25 7.86739 13.25 8C13.25 8.13261 13.3027 8.25979 13.3964 8.35355C13.4902 8.44732 13.6174 8.5 13.75 8.5H15C15.1326 8.5 15.2598 8.44732 15.3536 8.35355C15.4473 8.25979 15.5 8.13261 15.5 8C15.5 7.86739 15.4473 7.74021 15.3536 7.64645C15.2598 7.55268 15.1326 7.5 15 7.5Z"
                fill="#818C99"
            />
            <path
                d="M12.0687 4.43128C12.1337 4.43185 12.1981 4.41943 12.2583 4.39475C12.3184 4.37006 12.3729 4.33361 12.4187 4.28753L13.3062 3.40628C13.386 3.30913 13.4267 3.1858 13.4205 3.06027C13.4144 2.93475 13.3617 2.816 13.2729 2.72713C13.184 2.63827 13.0653 2.58563 12.9397 2.57947C12.8142 2.5733 12.6909 2.61405 12.5937 2.69378L11.7125 3.58128C11.619 3.67501 11.5665 3.80201 11.5665 3.9344C11.5665 4.0668 11.619 4.1938 11.7125 4.28753C11.759 4.33437 11.8146 4.37126 11.8759 4.39598C11.9371 4.42069 12.0027 4.4327 12.0687 4.43128Z"
                fill="#818C99"
            />
        </svg>

        <svg
            class="moon"
            width="16"
            height="16"
            viewBox="0 0 16 16"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
        >
            <path
                d="M14.0194 9.39375C13.9872 9.28989 13.9224 9.19916 13.8346 9.13499C13.7468 9.07083 13.6407 9.03665 13.5319 9.0375L13.3944 9.0625C12.4992 9.30959 11.5545 9.3148 10.6566 9.07759C9.75874 8.84038 8.93985 8.36925 8.28349 7.71225C7.62713 7.05526 7.15679 6.23591 6.92045 5.33781C6.68411 4.4397 6.69023 3.49497 6.93819 2.6C6.95044 2.56375 6.95677 2.52577 6.95694 2.4875C6.96288 2.40684 6.94891 2.32596 6.91627 2.25196C6.88363 2.17797 6.83331 2.11312 6.76974 2.06313C6.70616 2.01313 6.63128 1.97952 6.55167 1.96524C6.47207 1.95097 6.39017 1.95646 6.31319 1.98125C5.26244 2.27577 4.30712 2.84026 3.54225 3.61857C2.77738 4.39688 2.22962 5.36189 1.95346 6.41761C1.67729 7.47332 1.68235 8.58294 1.96813 9.6361C2.25391 10.6892 2.81044 11.6492 3.58238 12.4205C4.35431 13.1918 5.31474 13.7476 6.36812 14.0325C7.4215 14.3174 8.53113 14.3216 9.58662 14.0446C10.6421 13.7676 11.6067 13.219 12.3844 12.4535C13.1621 11.688 13.7258 10.7322 14.0194 9.68125C14.0509 9.588 14.0509 9.48701 14.0194 9.39375Z"
                fill="#ECF2FC"
            />
        </svg>
    </div>
</template>

<script>
import { mapGetters } from "vuex";

export default {
    name: "select-theme",
    props: {
        viewportWidth: Number,
    },
    data() {
        return {
            opened: false,
            timer: true,
        };
    },
    computed: {
        ...mapGetters(["isDark"]),
        theme() {
            return this.active.value;
        },
        options() {
            return [
                {
                    name: "Светлая",
                    img: "light.png",
                    value: "light",
                },
                {
                    name: "Темная",
                    img: "dark.png",
                    value: "dark",
                },
            ];
        },
        active() {
            if (this.isDark) {
                return this.options.filter((el) => el.value === "dark")[0];
            } else {
                return this.options.filter((el) => el.value === "light")[0];
            }
        },
    },
    methods: {
        async changeActive() {
            if (this.timer) {
                this.timer = false;
                this.theme === "light"
                    ? this.$store.dispatch("SetThemeVal", true)
                    : this.$store.dispatch("SetThemeVal", false);
                this.$store.dispatch("theme", this.isDark);
                setTimeout(() => this.timer = true, 500)
            }
        },
    },
    mounted() {
        this.$store.dispatch("theme", this.isDark);
    },
};
</script>

<style lang="scss" scoped>
.checkbox {
    min-width: 48px;
    min-height: 24px;
    background: #bcd0f1;
    border-radius: 24px;
    position: relative;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    padding: 4px;

    &::before {
        content: "";
        display: inline-flex;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: 4px;
        background: #5389e1;
        transition: all 0.3s ease 0s;
    }
    &.active {
        &::before {
            left: calc(100% - 20px);
        }
    }
    svg {
        width: 16px;
        height: 16px;
    }
}
</style>
