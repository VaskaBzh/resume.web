import{M as R}from"./MainTitle-5abaae33.js";import{M as H}from"./MainCopy-b48a6063.js";import{G as l,P as B,I as N}from"./GradeData-86a3feeb.js";import{_ as x,o as M,c as I,a as r,t as o,C,P as V,m as P,r as _,d as a,h as n,b as f,p as Z,e as T}from"./app-7a3a58ff.js";import{R as j}from"./ReferralSelect-da1293a2.js";import{a as E,R as G}from"./ReferralsLayoutView-cd624d01.js";import{I as U}from"./CabinetCard-9f91989e.js";/* empty css                                                                  */import"./TickIcon-df7ac9c5.js";import"./MainTabs-a2f87367.js";import"./TooltipCard-430f11e3.js";class W{constructor(t){this.interval=null,this.startValue=null,this.satoshi=null,this.startValue=null,this.cardValue=t,this.intervalStep=null,this.htmlCard=null}setHtmlCard(t){this.htmlCard=t}dropInterval(){clearInterval(this.interval)}dropCardValue(){this.cardValue=0}getIntervalStep(){this.intervalStep=1e3/this.satoshi}setBaseCardValue(t){const c=t%1===0,u=" BTC";this.cardValue=c?this.getPlusedValue(this.startValue):(this.getPlusedValue(this.startValue)/1e8).toFixed(8)+u}getPlusedValue(t){return t+1}setHtmlCardWidth(t){this.htmlCard.style.width=t+"px"}getSatoshi(t){const p=t%1===0;this.satoshi=p?t:t*1e7}getStartValue(t){this.startValue=Number(t)||0}cardsIndex(t,s){Number(s)===0?(this.setHtmlCardWidth(this.htmlCard.offsetWidth),this.getStartValue(s),this.getSatoshi(t),this.getIntervalStep(),this.setBaseCardValue(t),this.setInterval(t),setTimeout(()=>{this.setHtmlCardWidth(this.htmlCard.scrollWidth)},300)):(this.dropInterval(),this.dropCardValue())}setInterval(t){this.interval=setInterval(()=>{this.intervalIndex(t)},this.intervalStep)}intervalIndex(t){this.startValue<=this.satoshi&&this.startValue>0?this.setBaseCardValue(t):this.startValue>this.satoshi&&this.dropInterval(),this.startValuePlus()}startValuePlus(){this.startValue=this.startValue+1}}const D={name:"stats-card",props:{content:Object},data(){return{cardService:new W(this.content.value)}},watch:{"content.value"(e,t){this.cardService.setHtmlCard(this.$refs.card),this.cardService.cardsIndex(e,t)}},mounted(){}},F={class:"card",ref:"card"},O=["innerHTML"],q={class:"text text-gray card_text"},z={class:"card_value"};function J(e,t,s,d,i,p){return M(),I("div",F,[r("div",{class:"card_icon",innerHTML:s.content.svg},null,8,O),r("p",q,o(s.content.text),1),r("span",z,o(Number(i.cardService.cardValue)===0?"-":i.cardService.cardValue),1)],512)}const K=x(D,[["render",J],["__scopeId","data-v-856012bb"]]),Q={invite:`<svg
                        width="48"
                        height="48"
                        viewBox="0 0 48 48"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M33.935 28.88C36.675 29.34 39.695 28.86 41.815 27.44C44.635 25.56 44.635 22.48 41.815 20.6C39.675 19.18 36.615 18.7 33.875 19.18M13.995 28.88C11.255 29.34 8.235 28.86 6.115 27.44C3.295 25.56 3.295 22.48 6.115 20.6C8.255 19.18 11.315 18.7 14.055 19.18M35.995 14.32C35.8691 14.3 35.7409 14.3 35.615 14.32C34.2803 14.2717 33.0166 13.7064 32.091 12.7435C31.1654 11.7806 30.6505 10.4956 30.655 9.16C30.655 6.3 32.955 4 35.815 4C37.1835 4 38.496 4.54364 39.4637 5.51133C40.4314 6.47902 40.975 7.79148 40.975 9.16C40.9713 10.4965 40.451 11.7799 39.5228 12.7416C38.5947 13.7033 37.3306 14.2689 35.995 14.32ZM11.935 14.32C12.055 14.3 12.195 14.3 12.315 14.32C13.6497 14.2717 14.9134 13.7064 15.839 12.7435C16.7646 11.7806 17.2795 10.4956 17.275 9.16C17.275 6.3 14.975 4 12.115 4C10.7465 4 9.43402 4.54364 8.46633 5.51133C7.49864 6.47902 6.955 7.79148 6.955 9.16C6.975 11.96 9.175 14.22 11.935 14.32ZM23.995 29.26C23.8691 29.24 23.7409 29.24 23.615 29.26C22.2803 29.2117 21.0166 28.6464 20.091 27.6835C19.1654 26.7206 18.6505 25.4356 18.655 24.1C18.655 21.24 20.955 18.94 23.815 18.94C25.1835 18.94 26.496 19.4836 27.4637 20.4513C28.4314 21.419 28.975 22.7315 28.975 24.1C28.955 26.9 26.755 29.18 23.995 29.26ZM18.175 35.56C15.355 37.44 15.355 40.52 18.175 42.4C21.375 44.54 26.615 44.54 29.815 42.4C32.635 40.52 32.635 37.44 29.815 35.56C26.635 33.44 21.375 33.44 18.175 35.56Z"
                            stroke="#5389e1"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>`,active:`<svg
                        width="48"
                        height="48"
                        viewBox="0 0 48 48"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M6.80859 44.0005C6.80859 36.2605 14.5086 30.0005 23.9886 30.0005C25.9086 30.0005 27.7686 30.2605 29.5086 30.7405M23.9886 24.0005C26.6408 24.0005 29.1843 22.9469 31.0597 21.0716C32.935 19.1962 33.9886 16.6527 33.9886 14.0005C33.9886 11.3483 32.935 8.80478 31.0597 6.92942C29.1843 5.05406 26.6408 4.00049 23.9886 4.00049C21.3364 4.00049 18.7929 5.05406 16.9175 6.92942C15.0422 8.80478 13.9886 11.3483 13.9886 14.0005C13.9886 16.6527 15.0422 19.1962 16.9175 21.0716C18.7929 22.9469 21.3364 24.0005 23.9886 24.0005Z"
                            stroke="#5389e1"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                        <path
                            d="M43.9961 36.0006C43.9961 37.5006 43.5761 38.9206 42.8361 40.1206C42.4161 40.8406 41.8761 41.4806 41.2561 42.0006C39.8561 43.2606 38.0161 44.0006 35.9961 44.0006C34.6172 44.0035 33.2614 43.6472 32.062 42.9669C30.8627 42.2865 29.8612 41.3056 29.1561 40.1206C28.3948 38.8814 27.9932 37.4549 27.9961 36.0006C27.9961 33.4806 29.1561 31.2206 30.9961 29.7606C32.1721 28.818 33.5905 28.2269 35.0878 28.0554C36.5851 27.8839 38.1004 28.1389 39.4591 28.791C40.8178 29.4432 41.9646 30.466 42.7673 31.7415C43.57 33.0171 43.996 34.4935 43.9961 36.0006Z"
                            stroke="#5389e1"
                            stroke-width="2.5"
                            stroke-miterlimit="10"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                        <path
                            d="M32.8711 36L34.8511 37.98L39.1111 34.04"
                            stroke="#5389e1"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>`,profit:`<svg
                        width="49"
                        height="48"
                        viewBox="0 0 49 48"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M17.8438 28.6585C17.8438 31.2385 19.8238 33.3185 22.2838 33.3185H27.3038C29.4438 33.3185 31.1838 31.4985 31.1838 29.2585C31.1838 26.8185 30.1238 25.9585 28.5438 25.3985L20.4837 22.5985C18.9037 22.0385 17.8438 21.1785 17.8438 18.7385C17.8438 16.4985 19.5838 14.6785 21.7238 14.6785H26.7437C29.2037 14.6785 31.1838 16.7585 31.1838 19.3385M24.4998 11.9985V35.9985"
                            stroke="#5389e1"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                        <path
                            d="M24.4844 43.999C35.5304 43.999 44.4844 35.045 44.4844 23.999C44.4844 12.953 35.5304 3.99902 24.4844 3.99902C13.4384 3.99902 4.48438 12.953 4.48438 23.999C4.48438 35.045 13.4384 43.999 24.4844 43.999Z"
                            stroke="#5389e1"
                            stroke-width="2.5"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                        />
                    </svg>`};class h{constructor(t,s,d){this.svg=Q[t],this.text=s,this.value=d}}class X{constructor(t,s){this.statsCards=[],this.accounts=[],this.gradeList=[],this.referrals={},this.translate=t,this.code="",this.activeSubId=null,this.route=s,this.user=null}setUser(t){this.user=t}getHashRate(t){return t?(t==null?void 0:t.length)<=5?t:Number(t).toFixed(0):0}getStatsCards(t){this.statsCards.length=0,this.statsCards=[...this.statsCards,new h("invite",this.translate("stats.cards[0]"),(t==null?void 0:t.attached_referrals_count)||0),new h("profit",this.translate("stats.cards[2]"),Number(t==null?void 0:t.referrals_total_amount)||0),new h("active",this.translate("stats.cards[1]"),(t==null?void 0:t.active_referrals_count)||0),new h("hashrate",this.translate("stats.cards[1]"),this.getHashRate(t==null?void 0:t.total_referrals_hash_rate)),new h("percent",this.translate("stats.cards[1]"),(t==null?void 0:t.referral_percent)||0),new h("hash_unit",this.translate("stats.cards[1]"),(t==null?void 0:t.hash_rate_unit)||"T")]}getSelectAccounts(t){this.accounts=t}sendMessage(t){C.dispatch("getMessage",t)}async fetchActivateSub(t){return await V.put(`/subs/sub/activate/${t}`)}async changeActiveSub(t){try{const s=await this.fetchActivateSub(t);C.dispatch("setNotification",{status:"success",title:"success",text:s.data.message})}catch(s){console.error(`Error with: ${s}`)}}setCode(t=null){this.code=t||"..."}setActiveSub(t){this.activeSubId=t}transformCode(t){const s=new URL(t);return`${window.location.host}/registration${s.search}`}async fetchReferralStatistic(){return await V.get(`/referrals/statistic/${this.user.id}`)}async index(){try{const t=(await this.fetchReferralStatistic()).data.data;let s=this.transformCode(t.referral_url);this.setCode(s||"..."),this.setActiveSub(t.group_id),this.getStatsCards(t)}catch(t){console.error(`FetchError: ${t}`);const s="ERR_CANCELED";t.code!==s&&C.dispatch("setNotification",{status:"error",title:"error",text:t.response.data.errors.message[0]})}}getGradeList(){this.gradeList=[new l("0.8","> 30"),new l("0.9","30 - 49"),new l("1.0","75 - 99"),new l("1.25","75 - 99"),new l("1.5","100 - 199"),new l("2.0","200 - 299"),new l("< 3","300 - 500")]}}const Y="/bundle/assets/percent-icon-6b95c8b5.png",tt="/bundle/assets/hashrate-icon-22a433db.png",et="/bundle/assets/income-icon-8f758369.png",st="/bundle/assets/invite-icon-1f097b11.png",rt="/bundle/assets/active-icon-a70db62d.png";const it={name:"CabinetView",components:{MainTitle:R,MainCopy:H,PercentCard:B,StatsCard:K,ReferralSelect:j,InfoList:N,ReferralsLayoutView:E,InfoCard:U},i18n:{sharedMessages:G},props:{message:String},computed:{...P(["allAccounts","user"])},data(){return{percent:.8,service:new X(this.$t,this.$route)}},watch:{user:{async handler(e){this.service.setUser(e),await this.service.index()},deep:!0},async allAccounts(e){e&&await this.service.getSelectAccounts(e)},"$i18n.locale"(){this.service.getGradeList()}},async mounted(){this.user.id&&(this.service.setUser(this.user),this.service.index()),this.service.getGradeList(),this.service.getStatsCards({}),this.allAccounts&&this.service.getSelectAccounts(this.allAccounts)}},v=e=>(Z("data-v-6a93e242"),e=e(),T(),e),at={class:"referral__content"},nt={class:"grid-column"},ot={class:"card__block"},ct=v(()=>r("img",{src:Y},null,-1)),lt=v(()=>r("img",{src:tt},null,-1)),dt=v(()=>r("img",{src:et},null,-1)),ht={class:"cabinet__block cabinet__block-light referral__block"},ut={class:"text text-gray referral_text"},_t={class:"cabinet__block cabinet__block-light referral__block"},vt={class:"text text-gray referral_text referral_text-mb"},pt={class:"referral__row"},Ct={class:"grid-column"},ft={class:"card__block"},gt=v(()=>r("img",{src:st},null,-1)),mt=v(()=>r("img",{src:rt},null,-1)),bt={class:"cabinet__block cabinet__block-grid cabinet__block-light referral__block referral__block-full"},wt={class:"text text-gray referral_text"};function St(e,t,s,d,i,p){var g,m,b,w,S,k;const c=_("InfoCard"),u=_("main-title"),y=_("referral-select"),$=_("main-copy"),L=_("info-list");return M(),I("div",at,[r("div",nt,[r("div",ot,[a(c,{class:"referral__card-info",title:e.$t("stats.cards[0]"),value:((g=i.service.statsCards[4])==null?void 0:g.value)??0,unit:"%"},{svg:n(()=>[ct]),_:1},8,["title","value"]),a(c,{class:"referral__card-info",title:e.$t("stats.cards[1]"),value:((m=i.service.statsCards[3])==null?void 0:m.value)??0,unit:`${((b=i.service.statsCards[5])==null?void 0:b.value)??"T"}H/s`},{svg:n(()=>[lt]),_:1},8,["title","value","unit"])]),a(c,{class:"referral__card-info referral__general-profit","current-page":"worker",title:e.$t("stats.cards[4]"),value:((w=i.service.statsCards[1])==null?void 0:w.value)??0,unit:"BTC"},{svg:n(()=>[dt]),_:1},8,["title","value"]),r("div",ht,[a(u,{class:"title referral_title"},{default:n(()=>[f(o(e.$t("incomes.title")),1)]),_:1}),r("p",ut,o(e.$t("incomes.text")),1),a(y,{class:"referral_select-cabinet",rows:i.service.accounts,"active-sub-id":i.service.activeSubId,onChangeSub:t[0]||(t[0]=A=>i.service.changeActiveSub(A))},null,8,["rows","active-sub-id"])]),r("div",_t,[a(u,{class:"title referral_title"},{default:n(()=>[f(o(e.$t("referral.title")),1)]),_:1}),r("p",vt,o(e.$t("referral.text")),1),r("div",pt,[a($,{class:"referral_code",code:i.service.code},null,8,["code"])])])]),r("div",Ct,[r("div",ft,[a(c,{class:"referral__card-info",title:e.$t("stats.cards[2]"),value:((S=i.service.statsCards[0])==null?void 0:S.value)??0},{svg:n(()=>[gt]),_:1},8,["title","value"]),a(c,{class:"referral__card-info",title:e.$t("stats.cards[3]"),value:((k=i.service.statsCards[2])==null?void 0:k.value)??0,hint:e.$t("stats.hints.active")},{svg:n(()=>[mt]),_:1},8,["title","value","hint"])]),r("div",bt,[a(u,{class:"title referral_title"},{default:n(()=>[f(o(e.$t("grade.title")),1)]),_:1}),r("p",wt,o(e.$t("grade.text")),1),a(L,{"grade-list":i.service.gradeList},null,8,["grade-list"])])])])}const Bt=x(it,[["render",St],["__scopeId","data-v-6a93e242"]]);export{Bt as default};
