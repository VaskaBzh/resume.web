import{p as C}from"./policy-bc46909d.js";import{A as S,M as y,a as E}from"./AuthErrors-d335e0f9.js";import{V as M,M as R}from"./ValidateService-56a5ee18.js";import{M as I}from"./MainTitle-5abaae33.js";import{M as B}from"./MainButton-069506c4.js";import{P as F,C as L,m as P,_ as v,r as l,o as w,c as V,d as i,h as u,b as m,t as c,a as s,n as d,w as $,L as A,B as D,p as N,e as T,g as q}from"./app-7a3a58ff.js";/* empty css                                                                  */import"./MainIcon-57980112.js";class j{constructor(r,o,n,t,h){this.email=r,this.name=o,this.password=n,this.password_confirmation=t,this.referral_code=h}}class z{constructor(r,o){this.form={},this.validate={},this.checkbox=!1,this.checkboxState=!1,this.router=r,this.route=o,this.validateService=new M,this.waitRegistration=!1}setForm(){var o,n;const r=(n=(o=this.route)==null?void 0:o.query)==null?void 0:n.referral_code;this.form={...new j("","","","",r)}}async account_create(){if(this.checkbox){let r=/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/;if(Object.entries(this.validate).length===0&&r.test(this.form.email)){this.waitRegistration=!0;try{const n=(await F.post("/register",this.form)).data.user;this.router.push({name:"confirm",query:{email:n.email,action:"registration"}}),this.waitRegistration=!1}catch(o){this.waitRegistration=!1,console.error("Error with: "+o),L.dispatch("setFullErrors",o.response.data.errors)}}}else this.checkboxState=!0,setTimeout(()=>this.checkboxState=!1,1500)}validateProcess(r){this.validate=this.validateService.validateProcess(r,this.form,this.validate)}}const G={name:"RegistrationForm",components:{AuthInput:S,MainPassword:y,MainValidate:R,AuthErrors:E,MainTitle:I,MainButton:B},computed:{...P(["errors","errorsExpired"])},data(){return{pdf:C,service:new z(this.$router,this.$route)}},mounted(){this.service.setForm()}},O=e=>(N("data-v-6eaf60e8"),e=e(),T(),e),U={class:"form-auth__content"},W=O(()=>s("div",{class:"fake"},[s("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M9.50538 18L4 12.2809L5.05684 11.183L9.50538 15.8043L18.9432 6L20 7.09787L9.50538 18Z",fill:"#7C7C7C"}),s("rect",{x:"0.5",y:"0.5",width:"23",height:"23",rx:"3.5",stroke:"#7C7C7C"})])],-1)),Z=["href"],H={class:"form-auth__block"},J={class:"text text-light form-auth_text"};function K(e,r,o,n,t,h){const p=l("main-title"),g=l("auth-errors"),f=l("auth-input"),_=l("main-password"),k=l("main-validate"),b=l("main-button"),x=l("router-link");return w(),V("form",{class:"form-auth",autocomplete:"off",onSubmit:r[5]||(r[5]=D((...a)=>t.service.account_create&&t.service.account_create(...a),["prevent"]))},[i(p,{class:"form-auth_title"},{default:u(()=>[m(c(e.$t("auth.reg.title")),1)]),_:1}),i(g,{errors:e.errors},null,8,["errors"]),s("div",U,[i(f,{error:e.errorsExpired.email,model:t.service.form.email,placeholder:e.$t("auth.reg.placeholders[0]"),name:"email",type:"email",autocomplete:"username",onChangeInput:r[0]||(r[0]=a=>t.service.form.email=a)},null,8,["error","model","placeholder"]),i(f,{error:e.errorsExpired.name,model:t.service.form.name,placeholder:e.$t("auth.reg.placeholders[1]"),name:"username",type:"text",autocomplete:"off",onChangeInput:r[1]||(r[1]=a=>t.service.form.name=a)},null,8,["error","model","placeholder"]),s("div",{class:d(["form-auth_row password_row",{error:e.errorsExpired.password}])},[i(_,{name:"password",placeholder:e.$t("auth.reg.placeholders[2]"),model:t.service.form.password,errors:e.errorsExpired,autocomplete:"current-password",onChangeInput:r[2]||(r[2]=a=>t.service.validateProcess(a))},null,8,["placeholder","model","errors"])],2),i(k,{validate:t.service.validate},null,8,["validate"]),s("div",{class:d(["form-auth_row password_row",{error:e.errorsExpired.password}])},[i(_,{name:"password_confirmation",placeholder:e.$t("auth.reg.placeholders[3]"),model:t.service.form.password_confirmation,autocomplete:"new-password",onChangeInput:r[3]||(r[3]=a=>t.service.form.password_confirmation=a)},null,8,["placeholder","model"])],2)]),$(s("input",{id:"checkbox","onUpdate:modelValue":r[4]||(r[4]=a=>t.service.checkbox=a),class:"form-auth_checkbox",type:"checkbox"},null,512),[[A,t.service.checkbox]]),s("label",{for:"checkbox",class:d({error:t.service.checkboxState})},[W,s("span",null,[m(c(e.$t("auth.reg.checkbox[0]"))+" ",1),s("a",{href:t.pdf,class:"form-auth_link"},c(e.$t("auth.reg.checkbox[1]")),9,Z)])],2),s("div",H,[i(b,{class:"form-auth_button button-xl",wait:t.service.waitRegistration,type:"submit"},{text:u(()=>[m(c(e.$t("auth.reg.button")),1)]),_:1},8,["wait"])]),s("p",J,[m(c(e.$t("auth.reg.link[0]"))+" ",1),i(x,{to:{name:"login"},class:"form-auth_link"},{default:u(()=>[m(c(e.$t("auth.reg.link[1]")),1)]),_:1})])],32)}const Q=v(G,[["render",K],["__scopeId","data-v-6eaf60e8"]]),X={name:"reg-page",props:["errors"],components:{RegistrationForm:Q},mounted(){document.title=this.$t("auth.reg.head")}};function Y(e,r,o,n,t,h){const p=l("registration-form");return w(),q(p,{errors:o.errors},null,8,["errors"])}const le=v(X,[["render",Y]]);export{le as default};
