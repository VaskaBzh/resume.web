import{R as m}from"./ReferralSelect-da1293a2.js";import{M as l}from"./MainSearch-cc3f8f4b.js";import{T as p}from"./TableService-ecb32e12.js";import{P as _,_ as u,m as d,r as n,o as f,c as w,d as o,h as g}from"./app-7a3a58ff.js";import{R as y,a as b}from"./ReferralsLayoutView-cd624d01.js";import{M as v}from"./MainTable-a3e08966.js";import{M as T}from"./MainSlider-cf396ea1.js";import"./MainTitle-5abaae33.js";/* empty css                                                                  */import"./MainTabs-a2f87367.js";import"./MainPreloader-edb92089.js";import"./StatesService-a0d6c34c.js";import"./anime.es-de4e5aa0.js";class ${constructor(e,s,r,a,i){this.date=e,this.mail=s,this.amount=`${r} BTC`,this.hashRate=`${a} ${i}h/s`}}class I extends p{constructor(e,s){super(e,s),this.user=null}setUser(e){this.user=e}setter(e){return new $(this.dateFormatter(e.created_at),e.email,e.daily_amount,e.hash,"T")}async fetchIncomes(e,s){return await _.get(`/referrals/incomes/${this.user.id}?page=1&per_page=1000`)}useTranslater(e){return e.map(s=>this.translate(`income_titles[${s}]`))}async index(e=1,s=15){this.emptyTable=!1,this.waitTable=!0;let r={};try{r=await this.fetchIncomes(e,s),this.meta={meta:r.data},this.rows=r.data.data.map(a=>this.setter(a)),this.rows=r.data.data.map(a=>this.setter(a)),this.rows.length===0&&(this.emptyTable=!0),this.titles=this.useTranslater([0,1,2,4])}catch(a){console.error(`FetchError: ${a}`),this.emptyTable=!0}return this}async setTable(e=1,s=15){return await this.index(e,s),this.table.set("titles",this.titles),this.table.set("rows",this.rows),this.waitTable=!1,this}}const x={name:"payment-view",i18n:{sharedMessages:y},computed:{...d(["user"])},components:{ReferralSelect:m,MainSearch:l,MainSlider:T,MainTable:v,ReferralsLayoutView:b},data(){return{service:new I(this.$t,[0,1,2,3,4]),per_page:10,page:1}},watch:{user:{async handler(t){this.service.setUser(t),await this.initIncomes()},deep:!0},page(){this.initIncomes()},filter(){this.initIncomes()},per_page(){this.initIncomes()}},methods:{async initIncomes(){await this.service.setTable(this.page,this.per_page)},changePerPage(t){this.per_page=t,this.page=1},user(t){this.service.setUser(t)}},async mounted(){var t;(t=this.user)!=null&&t.id&&(this.service.setUser(this.user),await this.initIncomes())}},M={class:"referral__content"};function P(t,e,s,r,a,i){const c=n("main-table"),h=n("main-slider");return f(),w("div",M,[o(h,{class:"referral__slider",wait:a.service.waitTable,empty:a.service.emptyTable,rowsNum:"1000",haveNav:!1},{default:g(()=>[o(c,{table:a.service.table},null,8,["table"])]),_:1},8,["wait","empty"])])}const L=u(x,[["render",P],["__scopeId","data-v-0528fcea"]]);export{L as default};
