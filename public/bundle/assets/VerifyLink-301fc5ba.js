import{C as r,P as a,_ as c,o as l,c as d,t as f,B as h}from"./app-7a3a58ff.js";const v={en:{verify_link:"Verify email",back:"Back",form:{wallets:{title:"Wallet Change",text:"To confirm the wallet address change, enter the code sent to",placeholder:"Confirmation Code",re_verify_text:"Resend Code",button_text:"Change"},wallets_add:{title:"Add Wallet",text:"To confirm the wallet addition, enter the code sent to your email",placeholder:"Confirmation Code",re_verify_text:"Resend Code",button_text:"Add"},fac:{title:"Login Confirmation",text:"Enter the temporary code from Google Authenticator",placeholder:"Confirmation code",button_text:"Log in"}}},ru:{verify_link:"Подтвердите почту",back:"Назад",form:{wallets:{title:"Изменение кошелька",text:"Для подтверждения смены адреса кошелька введите код отправленный на почту",placeholder:"Код подтверждения",re_verify_text:"Отправить код повторно",button_text:"Изменить"},wallets_add:{title:"Добавление кошелька",text:"Для подтверждения добавления кошелька введите код отправленный на почту",placeholder:"Код подтверждения",re_verify_text:"Отправить код повторно",button_text:"Добавить"},fac:{title:"Подтверждение входа",text:"Введите временный код из Google Authenticator",placeholder:"Код подтверждения",button_text:"Войти"}}}};class m{constructor(e){this.code=e.code??""}}class y{constructor(){this.translate=null,this.overTime=0,this.verifyText="",this.text="",this.interval=null,this.form={}}setForm(e={}){this.form={...new m(e)}}setTranslate(e){this.translate=e}async sendEmailVerification(e,i=null){if(this.overTime===0)try{const s=await this.fetchVerify(e,i);return r.dispatch("setNotification",{status:"success",title:"success",text:s.data.message}),!1}catch(s){return console.error("Error with: "+s),this.dropInterval(),this.setOverTime(0),this.setText(),r.dispatch("setNotification",{status:"error",title:"error",text:s.response.data.message}),r.dispatch("setFullErrors",s.response.data.errors),!0}}async fetchVerify(e,i){return await a.post(e,i)}setText(e=null){this.text=e??this.verifyText}setVerifyText(e){this.verifyText=e}setOverTime(e){this.overTime=e}setTimer(e){this.overTime===0&&(this.setOverTime(e),this.interval=setInterval(()=>{if(this.overTime>0){this.setOverTime(this.overTime-1e3);let s=this.overTime;this.setText(`${s/1e3} сек`)}else this.dropInterval(),this.setOverTime(0),this.setText()},1e3))}dropInterval(){clearInterval(this.interval)}}const x={props:{verifyText:String,data:Object,verifyUrl:{type:String,default:"/email/verify"},sendVerification:{type:Boolean,default:!1}},i18n:{sharedMessages:v},name:"verify-link",data(){return{service:new y}},watch:{$t(t){t&&this.service.setTranslate(t)},sendVerification(t){t&&this.sendVerifyMessage()}},methods:{sendVerifyMessage(){const t=this.service.sendEmailVerification(this.verifyUrl,this.data);this.$emit("sendVerification",t),this.service.setTimer(6e4)}},mounted(){this.service.setVerifyText(this.verifyText??this.$t("verify_link")),this.service.setText(),this.$t&&this.service.setTranslate(this.$t)}};function _(t,e,i,o,s,n){return l(),d("a",{href:"#",onClick:e[0]||(e[0]=h(u=>n.sendVerifyMessage(),["prevent"])),class:"verify"},f(s.service.text),1)}const T=c(x,[["render",_],["__scopeId","data-v-bf027758"]]);export{T as V,v as a,y as b};
