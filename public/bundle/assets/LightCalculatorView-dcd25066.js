import{_ as m,o as r,c as p,i as k,w as y,J as P,a as o,v as w,t as _,C as D,F as I,k as $,B as G,n as L,m as V,g as S,h as f,j as x,q as g,r as b,d,b as U,x as B}from"./app-7a3a58ff.js";import{C as F}from"./converter-ec486320.js";import{H as M}from"./HomeMessage-d8fcb3c3.js";const H={name:"calculator-title"},A={class:"tittle"};function R(t,e,s,n,a,c){return r(),p("div",A,[k(t.$slots,"default",{},void 0,!0)])}const W=m(H,[["render",R],["__scopeId","data-v-d4778524"]]);const z={name:"CalculatorInput",props:{inputName:String,inputLabel:String,inputValue:String,inputPlaceholder:String,inputUnit:String,inputHint:String,disabled:Boolean},data(){return{value:this.inputValue,throttle:null}},watch:{value(t,e){clearTimeout(this.throttle);let s=/[a-zа-яё]|[!$()№";'@#&_%$*+,~`:=<>?[|\]/\-\\^{|}]/gi;if(t.length>9||s.test(t)){this.value=e;return}this.throttle=setTimeout(()=>{this.$emit("getValue",t)},500)},inputValue(t){this.value=t}}},E=["for"],j=["id","disabled","name","placeholder"];function q(t,e,s,n,a,c){return r(),p("label",{for:s.inputName,class:"row",onMousedown:e[1]||(e[1]=i=>t.$refs.input.focus())},[y(o("input",{id:s.inputName,ref:"input","onUpdate:modelValue":e[0]||(e[0]=i=>a.value=i),type:"text",disabled:s.disabled,name:s.inputName,class:"row__input",placeholder:t.$t(s.inputLabel)},null,8,j),[[P,a.value]]),y(o("span",{class:"row_unit"},_(s.inputUnit),513),[[w,s.inputUnit]])],40,E)}const J=m(z,[["render",q],["__scopeId","data-v-d7310259"]]);class K{constructor(e,s,n,a){this.hash=Number(e),this.diff=s,this.reward=n,this.fppsPercent=a}calculatorAmount(e){const s=3600*e,n=.5,a=3.5,c=this.diff*Math.pow(2,32)/(this.hash*Math.pow(10,12)*s),i=this.reward/c,l=i+i*(this.fppsPercent/100);return l-l*((n+a)/100)}}class C{constructor(e,s,n,a,c,i,l,h){this.inputName=e,this.inputLabel=s,this.inputValue=n,this.inputPlaceholder=a,this.inputUnit=c,this.inputHint=i,this.disabled=l,this.currency=h}}class O{constructor(){this.btcInfo={},this.graph=[],this.inputs=[]}setInputs(e){this.btcInfo=e,this.inputs=[new C("hash","hash","","","Th/ s",null,!1,!1),new C("electrical energy","costs","","","USD/kW",null,!1,!1)]}setItem(e,s){let n=this.inputs.find(a=>a.inputName===e);n.inputValue=s}async getGraph(e){const s=await this.getProfit(e),n=await this.getCost(s,e);let a=s-n;this.profit=a}async getProfit(e){const s=this.inputs[0].inputValue;return new K(s,this.btcInfo.diff,this.btcInfo.reward,this.btcInfo.fpps).calculatorAmount(e)}async converted(e){const s=e.toFixed(8),n=D.getters.currency.rates.USD||0,a=this.btcInfo.price;return(s*n/a).toFixed(8)}async getCost(e,s){const n=this.inputs[0].inputValue*15,a=this.inputs[1].inputValue,c=n/1e3;let i=s*c*a;return i=await this.converted(i),i}}const Q={name:"calculator-tabs",props:{tabs:Array,activeValue:Number}},X={class:"calculator__tabs"},Y=["onClick"];function Z(t,e,s,n,a,c){return r(),p("div",X,[(r(!0),p(I,null,$(s.tabs,(i,l)=>(r(),p("button",{key:l,onClick:G(h=>t.$emit("getDate",i.value),["prevent"]),class:L(["calculator_tab",{"calculator_tab-active":s.activeValue===i.value}])},_(i.name),11,Y))),128))])}const tt=m(Q,[["render",Z],["__scopeId","data-v-adc0ce6c"]]);const et={name:"converted-result",props:{bitcoinValue:Number},data(){return{converter:null,setted:!1}},computed:{...V(["btcInfo"])},watch:{bitcoinValue(){this.initConverter()}},methods:{async initConverter(){var t,e;this.setted=!1,this.converter=new F(this.bitcoinValue,((e=(t=this.btcInfo)==null?void 0:t.btc)==null?void 0:e.price)??0),await this.converter.convert(),setTimeout(()=>this.setted=!0,300)}},mounted(){this.initConverter()}},st={key:0,class:"result"},at={class:"result_value"},it={class:"result_value result_value-converted"},nt={class:"result_value result_value-converted"};function ot(t,e,s,n,a,c){return r(),S(g,{name:"newResult"},{default:f(()=>{var i,l,h;return[a.setted?(r(),p("div",st,[o("p",at,_((i=a.converter)==null?void 0:i.btc)+" BTC",1),o("div",null,[o("span",it," ≈ $"+_((l=a.converter)==null?void 0:l.usd),1),o("span",nt," ≈ ₽"+_((h=a.converter)==null?void 0:h.rub),1)])])):x("",!0)]}),_:1})}const ct=m(et,[["render",ot],["__scopeId","data-v-a80f872f"]]);const lt={name:"LightCalculatorView",components:{CalculatorInput:J,CalculatorTitle:W,CalculatorTabs:tt,ConvertedResult:ct},i18n:{sharedMessages:M},computed:{...V(["btcInfo"])},data(){return{lightService:new O,graphValue:24,graphTabs:[{name:this.$t("profitability_calculator.form_calculator.segment[0]"),value:24},{name:this.$t("profitability_calculator.form_calculator.segment[1]"),value:720},{name:this.$t("profitability_calculator.form_calculator.segment[2]"),value:2160}]}},watch:{"btcInfo.btc"(t){t&&(this.lightService.setInputs(t),this.lightService.getGraph(this.graphValue))}},mounted(){this.btcInfo.btc&&(this.lightService.setInputs(this.btcInfo.btc),this.lightService.getGraph(this.graphValue))},methods:{getDate(t){this.graphValue=t,this.lightService.getGraph(t)},setValue(t,e){this.lightService.setItem(t,e),this.lightService.getGraph(this.graphValue)}}},rt={class:"calculator__content"},ut={class:"calculator__form"},_t={class:"calculator__form_complexity"},pt={class:"calculator__form_complexity_row"},ht={class:"calculator__form_complexity_title"},dt={class:"calculator__form_complexity_data"},ft={class:"calculator__form_complexity_row"},mt={class:"calculator__form_complexity_title"},vt={class:"calculator__form_complexity_data"},bt={key:0,class:"calculator__graph"},gt={class:"calculator__result"};function yt(t,e,s,n,a,c){const i=b("calculator-title"),l=b("calculator-input"),h=b("calculator-tabs"),T=b("converted-result");return r(),p("div",rt,[d(g,{name:"slide"},{default:f(()=>[y(d(i,{class:"title-white title-h2 calculator_title"},{default:f(()=>[U(_(t.$t("profitability_calculator.form_calculator.title")),1)]),_:1},512),[[w,a.lightService.inputs.length>0]])]),_:1}),o("form",ut,[d(B,{name:"slide"},{default:f(()=>[(r(!0),p(I,null,$(a.lightService.inputs,(u,v)=>(r(),S(l,{key:v,"input-name":u.inputName,"input-label":u.inputLabel,"input-placeholder":u.inputPlaceholder,"input-value":u.inputValue,"input-unit":u.inputUnit,disabled:u.disabled,onGetValue:N=>c.setValue(u.inputName,N)},null,8,["input-name","input-label","input-placeholder","input-value","input-unit","disabled","onGetValue"]))),128))]),_:1})]),d(g,{name:"slide"},{default:f(()=>{var u,v;return[o("div",_t,[o("div",pt,[o("span",ht,_(t.$t("profitability_calculator.form_calculator.item[0]")),1),o("span",dt,_((u=t.btcInfo.btc)==null?void 0:u.diff),1)]),o("div",ft,[o("span",mt,_(t.$t("currency")),1),o("span",vt,_((v=t.btcInfo.btc)==null?void 0:v.price.toLocaleString("en-US"))+" USD",1)])])]}),_:1}),d(g,{name:"slide"},{default:f(()=>[a.lightService.inputs.length>0?(r(),p("div",bt,[d(h,{tabs:a.graphTabs,"active-value":a.graphValue,onGetDate:c.getDate},null,8,["tabs","active-value","onGetDate"]),o("div",gt,[d(T,{"bitcoin-value":a.lightService.profit},null,8,["bitcoin-value"])])])):x("",!0)]),_:1})])}const $t=m(lt,[["render",yt],["__scopeId","data-v-7c92e430"]]);export{W as C,C as I,$t as L,K as P,J as a};
