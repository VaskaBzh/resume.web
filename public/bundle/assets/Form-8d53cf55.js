import{M as V}from"./MainTitle-5abaae33.js";import{M as S}from"./MainDescription-a8d06221.js";import{_ as f,r as v,o as d,c,d as g,h as b,i as u,n as y,w as i,v as m,a as l,B as $,m as E,f as F,F as L,k as N,t as A,X as P}from"./app-7a3a58ff.js";import{S as C}from"./StatesService-a0d6c34c.js";const M={name:"MainHead",components:{MainTitle:V,MainDescription:S},props:{titleClass:{type:String,default:"title-popup"}}},z={class:"head"};function D(e,t,r,_,a,p){const o=v("main-title"),n=v("main-description");return d(),c("div",z,[g(o,{class:y(r.titleClass)},{default:b(()=>[u(e.$slots,"title",{},void 0,!0)]),_:3},8,["class"]),g(n,null,{default:b(()=>[u(e.$slots,"text",{},void 0,!0)]),_:3})])}const ie=f(M,[["render",D],["__scopeId","data-v-ab6ca195"]]);const Z={},I={class:"form__head"},q={class:"form__content"},k={class:"form__info"},O={class:"form__buttons"};function R(e,t,r,_,a,p){return d(),c("form",{class:"form",onSubmit:t[0]||(t[0]=$(o=>e.$emit("submitForm"),["prevent"]))},[i(l("div",I,[u(e.$slots,"head",{},void 0,!0)],512),[[m,e.$slots.head]]),i(l("div",q,[u(e.$slots,"content",{},void 0,!0)],512),[[m,e.$slots.content]]),i(l("div",k,[u(e.$slots,"info",{},void 0,!0)],512),[[m,e.$slots.info]]),i(l("div",O,[u(e.$slots,"buttons",{},void 0,!0)],512),[[m,e.$slots.buttons]])],32)}const le=f(Z,[["render",R],["__scopeId","data-v-ced80a45"]]),T={en:{email:"Invalid email",max:"Length up to {max} characters",min:"Length from {min} characters",string:"{name} must consist of A-Z, a-z",upper:"{name} must consist of A-Z",lower:"{name} must consist of a-z",number:"{name} must consist of 0-9",string_number:"{name} must consist of A-Z, a-z, 0-9",upper_number:"{name} must consist of A-Z, 0-9",lower_number:"{name} must consist of a-z, 0-9",required:"The field should not be empty",ru:"Only characters other than Cyrillic are not allowed",en:"Only characters other than Latin characters are not allowed"},ru:{email:"Некорректный email",max:"Длина до {max} символов",min:"Длина от {min} символов",string:"{name} должны состоять из A-Z, a-z",upper:"{name} должны состоять из A-Z",lowe:"{name} должны состоять из a-z",number:"{name} должны состоять из 0-9",string_number:"{name} должны состоять из A-Z, a-z, 0-9",upper_number:"{name} должны состоять из A-Z, 0-9",lower_number:"{name} должны состоять из a-z, 0-9",match:"{inputsName} не совпадают",required:"Поле не должен быть пустым",ru:"Не допустимы только символы, кроме кирилицы",en:"Не допустимы только символы, кроме латиницы"}};const x={name:"ValidationErrors",props:{error_list:{type:Array,default:[]},list_name:{type:String,default:""}},i18n:{sharedMessages:T},computed:{...E(["errors"])}},B={class:"errors"};function H(e,t,r,_,a,p){var n,s;const o=F("t");return i((d(),c("div",B,[(d(!0),c(L,null,N(r.error_list[r.list_name]??e.errors[r.list_name],(h,w)=>i((d(),c("div",{key:w,class:"errors_elem"})),[[o,h]])),128))],512)),[[m,((n=r.error_list[r.list_name])==null?void 0:n.length)>0||((s=e.errors[r.list_name])==null?void 0:s.length)>0]])}const U=f(x,[["render",H],["__scopeId","data-v-fd17e6fc"]]);const X={name:"FormPopupInput",components:{ValidationErrors:U},props:{inputValue:{type:String,default:""},inputLabel:{type:String,default:""},inputPlaceholder:{type:String,default:""},inputType:{type:String,default:"text"},inputName:{type:String,default:""}},computed:{...E(["errors"])},emits:["inputChange"],data(){return{modelValue:this.inputValue}},watch:{inputValue(e){this.modelValue=e},modelValue(e){this.$emit("inputChange",e)}}},K={class:"form__row"},j=["for"],G=["id","type","placeholder","name"];function W(e,t,r,_,a,p){var n;const o=v("validation-errors");return d(),c("div",K,[l("label",{for:r.inputName,class:y(["form__block",{"form__block-error":((n=e.errors[r.inputName])==null?void 0:n.length)>0}]),onClick:t[1]||(t[1]=s=>e.$refs.input.focus())},[i(l("span",{class:"form_label"},A(r.inputLabel),513),[[m,r.inputLabel]]),i(l("input",{id:r.inputName,ref:"input","onUpdate:modelValue":t[0]||(t[0]=s=>a.modelValue=s),type:r.inputType,placeholder:r.inputPlaceholder,name:r.inputName,class:"form_input"},null,8,G),[[P,a.modelValue]])],10,j),g(o,{class:"form__list-errors",error_list:e.errors,list_name:r.inputName},null,8,["error_list","list_name"])])}const ue=f(X,[["render",W],["__scopeId","data-v-9c153e20"]]);class me{constructor(){this.isPopupOpened=this.createStatesService(),this.isPopupClosed=this.createStatesService()}createStatesService(){return new C}openPopup(){return this.isPopupOpened.setTemporaryState(!0),this}closePopup(){return this.isPopupClosed.setTemporaryState(!0),this}getOpenedState(){return this.isPopupOpened.state}getClosedState(){return this.isPopupClosed.state}}const J={email:/^((?!\.)[\w-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/,number:/^[0-9]/,string:/^[a-z,A-Z]/,upper:/^[A-Z]/,lower:/^[a-z]/,string_number:/^[a-z,A-Z,0-9]/,upper_number:/^[A-Z,0-9]/,lower_number:/^[a-z,0-9]/,ru:/^[а-я,А-Я]/,en:/^[a-z,A-Z]/},Q={required:e=>e.length===0,equal:(e,t)=>e.length===t,max:(e,t=15)=>e.length>t,min:(e,t=3)=>e.length<t&&e.length!==0,isValid:(e,t)=>!J[t].test(e)&&e.length!==0},Y={email:"email",max:"max",min:"min",string:"string",upper:"upper",lower:"lower",number:"number",string_number:"string_number",upper_number:"upper_number",lower_number:"lower_number",equal:"equal",required:"required",ru:"ru",en:"en"},ee=0,te=1;class re{constructor(){this.errorName=null,this.errorEvent=null,this.errorList=[]}setErrorName(t){return this.errorName=t,this}increaseErrorList(t,r={}){this.errorList.push({path:Y[t],args:r})}dropErrorList(){this.errorList.length=0}setErrorEvent(){if(this.errorEvent=new CustomEvent("validationError",{detail:{[this.errorName]:this.errorList}}),document.dispatchEvent(this.errorEvent),Object.entries(this.errorList).length>0)throw new Error("Has validation error")}getValidationFunction(t){return Q[t]}validate(t,r,_){this.setErrorName(r).dropErrorList();const a=_.split("|");a.forEach((p,o)=>{const n=p.split(":"),s=n[ee],h=n[te];(this.getValidationFunction(s)?this.getValidationFunction(s)(t,h):this.getValidationFunction(this.getValidationFunction(s)?s:"isValid")(t,s))&&this.increaseErrorList(s,{[s]:h}),o===a.length-1&&this.setErrorEvent()})}}class de{constructor(){this.validator=this.createValidatorModel(),this.formData={},this.form={}}createValidatorModel(){return new re}setFormData(t){return this.formData=t,this}setClearForm(){this.form=new this.formData}setForm(t){this.form={...this.form,...t}}validate(t){for(const r in t)this.validator.validate(this.form[r],r,t[r])}}export{ue as F,ie as M,me as P,le as a,de as b};
