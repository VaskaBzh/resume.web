import{R as h}from"./ReferralsLayoutView-cd624d01.js";import{_ as m,o as c,c as n,a as o,b as u,t as l,n as _,d as v,h as p,w as k,F as f,k as w,v as g,q as S,p as b,e as C}from"./app-7a3a58ff.js";const y={name:"ReferralSelect",props:{rows:Array,activeSubId:String},i18n:{sharedMessages:h},data(){return{baseName:this.$t("incomes.base_value"),opened:!1,isClicked:!0,isBlocked:!1}},computed:{validateBaseName(){var e;return this.baseName===((e=Object.values(this.rows).find(s=>s.group_id===this.activeSubId))==null?void 0:e.name)}},watch:{opened(e){e?(document.addEventListener("click",this.onDocumentClick),document.addEventListener("keydown",this.onEscapeKeydown)):(document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("keydown",this.onEscapeKeydown))},activeSubId(){this.setBaseName()},rows(){this.setBaseName()}},mounted(){this.setBaseName()},beforeUnmount(){document.removeEventListener("click",this.onDocumentClick),document.removeEventListener("keydown",this.onEscapeKeydown)},methods:{setBaseName(){var e;this.activeSubId&&((e=Object.entries(this.rows))==null?void 0:e.length)>0&&(this.baseName=Object.values(this.rows).find(s=>s.group_id===this.activeSubId).name)},changeValue(e,s){this.baseName!==e&&(this.baseName=e,this.$emit("changeSub",s)),this.isBlocked=!0,setTimeout(()=>{this.isBlocked=!1},3e3),this.closeSelect()},toggleSelect(){this.isClicked&&(this.opened=!this.opened)},closeSelect(){setTimeout(()=>{this.isClicked=!0},3e3),this.opened=!1},onDocumentClick(e){setTimeout(()=>{this.isClicked=!1},3e3),this.$el.contains(e.target)||this.closeSelect()},onEscapeKeydown(e){setTimeout(()=>{this.isClicked=!1},3e3),e.keyCode===27&&this.closeSelect()}}},B=e=>(b("data-v-131b96d2"),e=e(),C(),e),N={class:"select"},E=B(()=>o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[o("path",{d:"M18 10L12 16L6 10","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),I={class:"select_list"},L=["onClick"];function x(e,s,d,D,i,a){return c(),n("div",N,[o("div",{ref:"select",class:_(["select_name",{"select_name-active":i.opened,"select_name-selected":a.validateBaseName,"select_name-opacity":i.isBlocked}]),onClick:s[0]||(s[0]=(...t)=>a.toggleSelect&&a.toggleSelect(...t))},[u(l(i.baseName)+" ",1),E],2),v(S,{name:"list"},{default:p(()=>[k(o("div",I,[(c(!0),n(f,null,w(d.rows,(t,r)=>(c(),n("div",{key:r,class:"select_row",onClick:R=>a.changeValue(t.name,t.group_id)},l(t.name),9,L))),128))],512),[[g,i.opened]])]),_:1})])}const j=m(y,[["render",x],["__scopeId","data-v-131b96d2"]]);export{j as R};
